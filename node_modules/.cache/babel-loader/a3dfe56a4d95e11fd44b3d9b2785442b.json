{"ast":null,"code":"import { Annotation, AnnotationView } from \"./annotation\";\nimport { ColumnDataSource } from \"../sources/column_data_source\";\nimport * as p from \"../../core/properties\";\nexport class BandView extends AnnotationView {\n  initialize() {\n    super.initialize();\n    this.set_data(this.model.source);\n  }\n\n  connect_signals() {\n    super.connect_signals();\n    this.connect(this.model.source.streaming, () => this.set_data(this.model.source));\n    this.connect(this.model.source.patching, () => this.set_data(this.model.source));\n    this.connect(this.model.source.change, () => this.set_data(this.model.source));\n  }\n\n  set_data(source) {\n    super.set_data(source);\n    this.visuals.warm_cache(source);\n    this.plot_view.request_render();\n  }\n\n  _map_data() {\n    const {\n      frame\n    } = this.plot_view;\n    const dim = this.model.dimension;\n    const xscale = frame.xscales[this.model.x_range_name];\n    const yscale = frame.yscales[this.model.y_range_name];\n    const limit_scale = dim == \"height\" ? yscale : xscale;\n    const base_scale = dim == \"height\" ? xscale : yscale;\n    const limit_view = dim == \"height\" ? frame.yview : frame.xview;\n    const base_view = dim == \"height\" ? frame.xview : frame.yview;\n\n    let _lower_sx;\n\n    if (this.model.properties.lower.units == \"data\") _lower_sx = limit_scale.v_compute(this._lower);else _lower_sx = limit_view.v_compute(this._lower);\n\n    let _upper_sx;\n\n    if (this.model.properties.upper.units == \"data\") _upper_sx = limit_scale.v_compute(this._upper);else _upper_sx = limit_view.v_compute(this._upper);\n\n    let _base_sx;\n\n    if (this.model.properties.base.units == \"data\") _base_sx = base_scale.v_compute(this._base);else _base_sx = base_view.v_compute(this._base);\n    const [i, j] = dim == 'height' ? [1, 0] : [0, 1];\n    const _lower = [_lower_sx, _base_sx];\n    const _upper = [_upper_sx, _base_sx];\n    this._lower_sx = _lower[i];\n    this._lower_sy = _lower[j];\n    this._upper_sx = _upper[i];\n    this._upper_sy = _upper[j];\n  }\n\n  render() {\n    if (!this.model.visible) return;\n\n    this._map_data();\n\n    const {\n      ctx\n    } = this.plot_view.canvas_view; // Draw the band body\n\n    ctx.beginPath();\n    ctx.moveTo(this._lower_sx[0], this._lower_sy[0]);\n\n    for (let i = 0, end = this._lower_sx.length; i < end; i++) {\n      ctx.lineTo(this._lower_sx[i], this._lower_sy[i]);\n    } // iterate backwards so that the upper end is below the lower start\n\n\n    for (let i = this._upper_sx.length - 1; i >= 0; i--) {\n      ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\n    }\n\n    ctx.closePath();\n\n    if (this.visuals.fill.doit) {\n      this.visuals.fill.set_value(ctx);\n      ctx.fill();\n    } // Draw the lower band edge\n\n\n    ctx.beginPath();\n    ctx.moveTo(this._lower_sx[0], this._lower_sy[0]);\n\n    for (let i = 0, end = this._lower_sx.length; i < end; i++) {\n      ctx.lineTo(this._lower_sx[i], this._lower_sy[i]);\n    }\n\n    if (this.visuals.line.doit) {\n      this.visuals.line.set_value(ctx);\n      ctx.stroke();\n    } // Draw the upper band edge\n\n\n    ctx.beginPath();\n    ctx.moveTo(this._upper_sx[0], this._upper_sy[0]);\n\n    for (let i = 0, end = this._upper_sx.length; i < end; i++) {\n      ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\n    }\n\n    if (this.visuals.line.doit) {\n      this.visuals.line.set_value(ctx);\n      ctx.stroke();\n    }\n  }\n\n}\nBandView.__name__ = \"BandView\";\nexport class Band extends Annotation {\n  constructor(attrs) {\n    super(attrs);\n  }\n\n  static init_Band() {\n    this.prototype.default_view = BandView;\n    this.mixins(['line', 'fill']);\n    this.define({\n      lower: [p.DistanceSpec],\n      upper: [p.DistanceSpec],\n      base: [p.DistanceSpec],\n      dimension: [p.Dimension, 'height'],\n      source: [p.Instance, () => new ColumnDataSource()],\n      x_range_name: [p.String, 'default'],\n      y_range_name: [p.String, 'default']\n    });\n    this.override({\n      fill_color: \"#fff9ba\",\n      fill_alpha: 0.4,\n      line_color: \"#cccccc\",\n      line_alpha: 0.3\n    });\n  }\n\n}\nBand.__name__ = \"Band\";\nBand.init_Band();","map":{"version":3,"sources":["/Users/gen/Desktop/defund_to_refund/node_modules/@bokeh/bokehjs/build/js/lib/models/annotations/band.js"],"names":["Annotation","AnnotationView","ColumnDataSource","p","BandView","initialize","set_data","model","source","connect_signals","connect","streaming","patching","change","visuals","warm_cache","plot_view","request_render","_map_data","frame","dim","dimension","xscale","xscales","x_range_name","yscale","yscales","y_range_name","limit_scale","base_scale","limit_view","yview","xview","base_view","_lower_sx","properties","lower","units","v_compute","_lower","_upper_sx","upper","_upper","_base_sx","base","_base","i","j","_lower_sy","_upper_sy","render","visible","ctx","canvas_view","beginPath","moveTo","end","length","lineTo","closePath","fill","doit","set_value","line","stroke","__name__","Band","constructor","attrs","init_Band","prototype","default_view","mixins","define","DistanceSpec","Dimension","Instance","String","override","fill_color","fill_alpha","line_color","line_alpha"],"mappings":"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","sourcesContent":["import { Annotation, AnnotationView } from \"./annotation\";\nimport { ColumnDataSource } from \"../sources/column_data_source\";\nimport * as p from \"../../core/properties\";\nexport class BandView extends AnnotationView {\n    initialize() {\n        super.initialize();\n        this.set_data(this.model.source);\n    }\n    connect_signals() {\n        super.connect_signals();\n        this.connect(this.model.source.streaming, () => this.set_data(this.model.source));\n        this.connect(this.model.source.patching, () => this.set_data(this.model.source));\n        this.connect(this.model.source.change, () => this.set_data(this.model.source));\n    }\n    set_data(source) {\n        super.set_data(source);\n        this.visuals.warm_cache(source);\n        this.plot_view.request_render();\n    }\n    _map_data() {\n        const { frame } = this.plot_view;\n        const dim = this.model.dimension;\n        const xscale = frame.xscales[this.model.x_range_name];\n        const yscale = frame.yscales[this.model.y_range_name];\n        const limit_scale = dim == \"height\" ? yscale : xscale;\n        const base_scale = dim == \"height\" ? xscale : yscale;\n        const limit_view = dim == \"height\" ? frame.yview : frame.xview;\n        const base_view = dim == \"height\" ? frame.xview : frame.yview;\n        let _lower_sx;\n        if (this.model.properties.lower.units == \"data\")\n            _lower_sx = limit_scale.v_compute(this._lower);\n        else\n            _lower_sx = limit_view.v_compute(this._lower);\n        let _upper_sx;\n        if (this.model.properties.upper.units == \"data\")\n            _upper_sx = limit_scale.v_compute(this._upper);\n        else\n            _upper_sx = limit_view.v_compute(this._upper);\n        let _base_sx;\n        if (this.model.properties.base.units == \"data\")\n            _base_sx = base_scale.v_compute(this._base);\n        else\n            _base_sx = base_view.v_compute(this._base);\n        const [i, j] = dim == 'height' ? [1, 0] : [0, 1];\n        const _lower = [_lower_sx, _base_sx];\n        const _upper = [_upper_sx, _base_sx];\n        this._lower_sx = _lower[i];\n        this._lower_sy = _lower[j];\n        this._upper_sx = _upper[i];\n        this._upper_sy = _upper[j];\n    }\n    render() {\n        if (!this.model.visible)\n            return;\n        this._map_data();\n        const { ctx } = this.plot_view.canvas_view;\n        // Draw the band body\n        ctx.beginPath();\n        ctx.moveTo(this._lower_sx[0], this._lower_sy[0]);\n        for (let i = 0, end = this._lower_sx.length; i < end; i++) {\n            ctx.lineTo(this._lower_sx[i], this._lower_sy[i]);\n        }\n        // iterate backwards so that the upper end is below the lower start\n        for (let i = this._upper_sx.length - 1; i >= 0; i--) {\n            ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\n        }\n        ctx.closePath();\n        if (this.visuals.fill.doit) {\n            this.visuals.fill.set_value(ctx);\n            ctx.fill();\n        }\n        // Draw the lower band edge\n        ctx.beginPath();\n        ctx.moveTo(this._lower_sx[0], this._lower_sy[0]);\n        for (let i = 0, end = this._lower_sx.length; i < end; i++) {\n            ctx.lineTo(this._lower_sx[i], this._lower_sy[i]);\n        }\n        if (this.visuals.line.doit) {\n            this.visuals.line.set_value(ctx);\n            ctx.stroke();\n        }\n        // Draw the upper band edge\n        ctx.beginPath();\n        ctx.moveTo(this._upper_sx[0], this._upper_sy[0]);\n        for (let i = 0, end = this._upper_sx.length; i < end; i++) {\n            ctx.lineTo(this._upper_sx[i], this._upper_sy[i]);\n        }\n        if (this.visuals.line.doit) {\n            this.visuals.line.set_value(ctx);\n            ctx.stroke();\n        }\n    }\n}\nBandView.__name__ = \"BandView\";\nexport class Band extends Annotation {\n    constructor(attrs) {\n        super(attrs);\n    }\n    static init_Band() {\n        this.prototype.default_view = BandView;\n        this.mixins(['line', 'fill']);\n        this.define({\n            lower: [p.DistanceSpec],\n            upper: [p.DistanceSpec],\n            base: [p.DistanceSpec],\n            dimension: [p.Dimension, 'height'],\n            source: [p.Instance, () => new ColumnDataSource()],\n            x_range_name: [p.String, 'default'],\n            y_range_name: [p.String, 'default'],\n        });\n        this.override({\n            fill_color: \"#fff9ba\",\n            fill_alpha: 0.4,\n            line_color: \"#cccccc\",\n            line_alpha: 0.3,\n        });\n    }\n}\nBand.__name__ = \"Band\";\nBand.init_Band();\n//# sourceMappingURL=band.js.map"]},"metadata":{},"sourceType":"module"}