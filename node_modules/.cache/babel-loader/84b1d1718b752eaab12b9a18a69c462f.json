{"ast":null,"code":"import { GestureTool, GestureToolView } from \"./gesture_tool\";\nimport { scale_range } from \"../../../core/util/zoom\";\nimport * as p from \"../../../core/properties\";\nimport { is_mobile } from \"../../../core/util/compat\";\nimport { bk_tool_icon_wheel_zoom } from \"../../../styles/icons\";\nexport class WheelZoomToolView extends GestureToolView {\n  _pinch(ev) {\n    // TODO (bev) this can probably be done much better\n    const {\n      sx,\n      sy,\n      scale\n    } = ev;\n    let delta;\n    if (scale >= 1) delta = (scale - 1) * 20.0;else delta = -20.0 / scale;\n\n    this._scroll({\n      type: \"wheel\",\n      sx,\n      sy,\n      delta\n    });\n  }\n\n  _scroll(ev) {\n    const {\n      frame\n    } = this.plot_view;\n    const hr = frame.bbox.h_range;\n    const vr = frame.bbox.v_range;\n    const {\n      sx,\n      sy\n    } = ev;\n    const dims = this.model.dimensions; // restrict to axis configured in tool's dimensions property and if\n    // zoom origin is inside of frame range/domain\n\n    const h_axis = (dims == 'width' || dims == 'both') && hr.start < sx && sx < hr.end;\n    const v_axis = (dims == 'height' || dims == 'both') && vr.start < sy && sy < vr.end;\n\n    if ((!h_axis || !v_axis) && !this.model.zoom_on_axis) {\n      return;\n    }\n\n    const factor = this.model.speed * ev.delta;\n    const zoom_info = scale_range(frame, factor, h_axis, v_axis, {\n      x: sx,\n      y: sy\n    });\n    this.plot_view.push_state('wheel_zoom', {\n      range: zoom_info\n    });\n    this.plot_view.update_range(zoom_info, false, true, this.model.maintain_focus);\n    if (this.model.document != null) this.model.document.interactive_start(this.plot_model);\n  }\n\n}\nWheelZoomToolView.__name__ = \"WheelZoomToolView\";\nexport class WheelZoomTool extends GestureTool {\n  constructor(attrs) {\n    super(attrs);\n    this.tool_name = \"Wheel Zoom\";\n    this.icon = bk_tool_icon_wheel_zoom;\n    this.event_type = is_mobile ? \"pinch\" : \"scroll\";\n    this.default_order = 10;\n  }\n\n  static init_WheelZoomTool() {\n    this.prototype.default_view = WheelZoomToolView;\n    this.define({\n      dimensions: [p.Dimensions, \"both\"],\n      maintain_focus: [p.Boolean, true],\n      zoom_on_axis: [p.Boolean, true],\n      speed: [p.Number, 1 / 600]\n    });\n    this.register_alias(\"wheel_zoom\", () => new WheelZoomTool({\n      dimensions: 'both'\n    }));\n    this.register_alias(\"xwheel_zoom\", () => new WheelZoomTool({\n      dimensions: 'width'\n    }));\n    this.register_alias(\"ywheel_zoom\", () => new WheelZoomTool({\n      dimensions: 'height'\n    }));\n  }\n\n  get tooltip() {\n    return this._get_dim_tooltip(this.tool_name, this.dimensions);\n  }\n\n}\nWheelZoomTool.__name__ = \"WheelZoomTool\";\nWheelZoomTool.init_WheelZoomTool();","map":{"version":3,"sources":["/Users/gen/Desktop/defund_to_refund/node_modules/@bokeh/bokehjs/build/js/lib/models/tools/gestures/wheel_zoom_tool.js"],"names":["GestureTool","GestureToolView","scale_range","p","is_mobile","bk_tool_icon_wheel_zoom","WheelZoomToolView","_pinch","ev","sx","sy","scale","delta","_scroll","type","frame","plot_view","hr","bbox","h_range","vr","v_range","dims","model","dimensions","h_axis","start","end","v_axis","zoom_on_axis","factor","speed","zoom_info","x","y","push_state","range","update_range","maintain_focus","document","interactive_start","plot_model","__name__","WheelZoomTool","constructor","attrs","tool_name","icon","event_type","default_order","init_WheelZoomTool","prototype","default_view","define","Dimensions","Boolean","Number","register_alias","tooltip","_get_dim_tooltip"],"mappings":"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","sourcesContent":["import { GestureTool, GestureToolView } from \"./gesture_tool\";\nimport { scale_range } from \"../../../core/util/zoom\";\nimport * as p from \"../../../core/properties\";\nimport { is_mobile } from \"../../../core/util/compat\";\nimport { bk_tool_icon_wheel_zoom } from \"../../../styles/icons\";\nexport class WheelZoomToolView extends GestureToolView {\n    _pinch(ev) {\n        // TODO (bev) this can probably be done much better\n        const { sx, sy, scale } = ev;\n        let delta;\n        if (scale >= 1)\n            delta = (scale - 1) * 20.0;\n        else\n            delta = -20.0 / scale;\n        this._scroll({ type: \"wheel\", sx, sy, delta });\n    }\n    _scroll(ev) {\n        const { frame } = this.plot_view;\n        const hr = frame.bbox.h_range;\n        const vr = frame.bbox.v_range;\n        const { sx, sy } = ev;\n        const dims = this.model.dimensions;\n        // restrict to axis configured in tool's dimensions property and if\n        // zoom origin is inside of frame range/domain\n        const h_axis = (dims == 'width' || dims == 'both') && hr.start < sx && sx < hr.end;\n        const v_axis = (dims == 'height' || dims == 'both') && vr.start < sy && sy < vr.end;\n        if ((!h_axis || !v_axis) && !this.model.zoom_on_axis) {\n            return;\n        }\n        const factor = this.model.speed * ev.delta;\n        const zoom_info = scale_range(frame, factor, h_axis, v_axis, { x: sx, y: sy });\n        this.plot_view.push_state('wheel_zoom', { range: zoom_info });\n        this.plot_view.update_range(zoom_info, false, true, this.model.maintain_focus);\n        if (this.model.document != null)\n            this.model.document.interactive_start(this.plot_model);\n    }\n}\nWheelZoomToolView.__name__ = \"WheelZoomToolView\";\nexport class WheelZoomTool extends GestureTool {\n    constructor(attrs) {\n        super(attrs);\n        this.tool_name = \"Wheel Zoom\";\n        this.icon = bk_tool_icon_wheel_zoom;\n        this.event_type = is_mobile ? \"pinch\" : \"scroll\";\n        this.default_order = 10;\n    }\n    static init_WheelZoomTool() {\n        this.prototype.default_view = WheelZoomToolView;\n        this.define({\n            dimensions: [p.Dimensions, \"both\"],\n            maintain_focus: [p.Boolean, true],\n            zoom_on_axis: [p.Boolean, true],\n            speed: [p.Number, 1 / 600],\n        });\n        this.register_alias(\"wheel_zoom\", () => new WheelZoomTool({ dimensions: 'both' }));\n        this.register_alias(\"xwheel_zoom\", () => new WheelZoomTool({ dimensions: 'width' }));\n        this.register_alias(\"ywheel_zoom\", () => new WheelZoomTool({ dimensions: 'height' }));\n    }\n    get tooltip() {\n        return this._get_dim_tooltip(this.tool_name, this.dimensions);\n    }\n}\nWheelZoomTool.__name__ = \"WheelZoomTool\";\nWheelZoomTool.init_WheelZoomTool();\n//# sourceMappingURL=wheel_zoom_tool.js.map"]},"metadata":{},"sourceType":"module"}