{"ast":null,"code":"const {\n  min,\n  max\n} = Math;\nexport function empty() {\n  return {\n    x0: Infinity,\n    y0: Infinity,\n    x1: -Infinity,\n    y1: -Infinity\n  };\n}\nexport function positive_x() {\n  return {\n    x0: Number.MIN_VALUE,\n    y0: -Infinity,\n    x1: Infinity,\n    y1: Infinity\n  };\n}\nexport function positive_y() {\n  return {\n    x0: -Infinity,\n    y0: Number.MIN_VALUE,\n    x1: Infinity,\n    y1: Infinity\n  };\n}\nexport function union(a, b) {\n  return {\n    x0: min(a.x0, b.x0),\n    x1: max(a.x1, b.x1),\n    y0: min(a.y0, b.y0),\n    y1: max(a.y1, b.y1)\n  };\n}\nexport class BBox {\n  constructor(box) {\n    if (box == null) {\n      this.x0 = 0;\n      this.y0 = 0;\n      this.x1 = 0;\n      this.y1 = 0;\n    } else if ('x0' in box) {\n      const {\n        x0,\n        y0,\n        x1,\n        y1\n      } = box;\n      if (!(x0 <= x1 && y0 <= y1)) throw new Error(`invalid bbox {x0: ${x0}, y0: ${y0}, x1: ${x1}, y1: ${y1}}`);\n      this.x0 = x0;\n      this.y0 = y0;\n      this.x1 = x1;\n      this.y1 = y1;\n    } else if (\"x\" in box) {\n      const {\n        x,\n        y,\n        width,\n        height\n      } = box;\n      if (!(width >= 0 && height >= 0)) throw new Error(`invalid bbox {x: ${x}, y: ${y}, width: ${width}, height: ${height}}`);\n      this.x0 = x;\n      this.y0 = y;\n      this.x1 = x + width;\n      this.y1 = y + height;\n    } else {\n      let left, right;\n      let top, bottom;\n\n      if (\"width\" in box) {\n        if (\"left\" in box) {\n          left = box.left;\n          right = left + box.width;\n        } else if (\"right\" in box) {\n          right = box.right;\n          left = right - box.width;\n        } else {\n          const w2 = box.width / 2;\n          left = box.hcenter - w2;\n          right = box.hcenter + w2;\n        }\n      } else {\n        left = box.left;\n        right = box.right;\n      }\n\n      if (\"height\" in box) {\n        if (\"top\" in box) {\n          top = box.top;\n          bottom = top + box.height;\n        } else if (\"bottom\" in box) {\n          bottom = box.bottom;\n          top = bottom - box.height;\n        } else {\n          const h2 = box.height / 2;\n          top = box.vcenter - h2;\n          bottom = box.vcenter + h2;\n        }\n      } else {\n        top = box.top;\n        bottom = box.bottom;\n      }\n\n      if (!(left <= right && top <= bottom)) throw new Error(`invalid bbox {left: ${left}, top: ${top}, right: ${right}, bottom: ${bottom}}`);\n      this.x0 = left;\n      this.y0 = top;\n      this.x1 = right;\n      this.y1 = bottom;\n    }\n  }\n\n  toString() {\n    return `BBox({left: ${this.left}, top: ${this.top}, width: ${this.width}, height: ${this.height}})`;\n  }\n\n  get left() {\n    return this.x0;\n  }\n\n  get top() {\n    return this.y0;\n  }\n\n  get right() {\n    return this.x1;\n  }\n\n  get bottom() {\n    return this.y1;\n  }\n\n  get p0() {\n    return [this.x0, this.y0];\n  }\n\n  get p1() {\n    return [this.x1, this.y1];\n  }\n\n  get x() {\n    return this.x0;\n  }\n\n  get y() {\n    return this.y0;\n  }\n\n  get width() {\n    return this.x1 - this.x0;\n  }\n\n  get height() {\n    return this.y1 - this.y0;\n  }\n\n  get rect() {\n    return {\n      x0: this.x0,\n      y0: this.y0,\n      x1: this.x1,\n      y1: this.y1\n    };\n  }\n\n  get box() {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  get h_range() {\n    return {\n      start: this.x0,\n      end: this.x1\n    };\n  }\n\n  get v_range() {\n    return {\n      start: this.y0,\n      end: this.y1\n    };\n  }\n\n  get ranges() {\n    return [this.h_range, this.v_range];\n  }\n\n  get aspect() {\n    return this.width / this.height;\n  }\n\n  get hcenter() {\n    return (this.left + this.right) / 2;\n  }\n\n  get vcenter() {\n    return (this.top + this.bottom) / 2;\n  }\n\n  contains(x, y) {\n    return x >= this.x0 && x <= this.x1 && y >= this.y0 && y <= this.y1;\n  }\n\n  clip(x, y) {\n    if (x < this.x0) x = this.x0;else if (x > this.x1) x = this.x1;\n    if (y < this.y0) y = this.y0;else if (y > this.y1) y = this.y1;\n    return [x, y];\n  }\n\n  union(that) {\n    return new BBox({\n      x0: min(this.x0, that.x0),\n      y0: min(this.y0, that.y0),\n      x1: max(this.x1, that.x1),\n      y1: max(this.y1, that.y1)\n    });\n  }\n\n  equals(that) {\n    return this.x0 == that.x0 && this.y0 == that.y0 && this.x1 == that.x1 && this.y1 == that.y1;\n  }\n\n  get xview() {\n    return {\n      compute: x => {\n        return this.left + x;\n      },\n      v_compute: xx => {\n        const _xx = new Float64Array(xx.length);\n\n        const left = this.left;\n\n        for (let i = 0; i < xx.length; i++) {\n          _xx[i] = left + xx[i];\n        }\n\n        return _xx;\n      }\n    };\n  }\n\n  get yview() {\n    return {\n      compute: y => {\n        return this.bottom - y;\n      },\n      v_compute: yy => {\n        const _yy = new Float64Array(yy.length);\n\n        const bottom = this.bottom;\n\n        for (let i = 0; i < yy.length; i++) {\n          _yy[i] = bottom - yy[i];\n        }\n\n        return _yy;\n      }\n    };\n  }\n\n}\nBBox.__name__ = \"BBox\";","map":{"version":3,"sources":["/Users/gen/Desktop/defund_to_refund/node_modules/@bokeh/bokehjs/build/js/lib/core/util/bbox.js"],"names":["min","max","Math","empty","x0","Infinity","y0","x1","y1","positive_x","Number","MIN_VALUE","positive_y","union","a","b","BBox","constructor","box","Error","x","y","width","height","left","right","top","bottom","w2","hcenter","h2","vcenter","toString","p0","p1","rect","h_range","start","end","v_range","ranges","aspect","contains","clip","that","equals","xview","compute","v_compute","xx","_xx","Float64Array","length","i","yview","yy","_yy","__name__"],"mappings":"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","sourcesContent":["const { min, max } = Math;\nexport function empty() {\n    return {\n        x0: Infinity,\n        y0: Infinity,\n        x1: -Infinity,\n        y1: -Infinity,\n    };\n}\nexport function positive_x() {\n    return {\n        x0: Number.MIN_VALUE,\n        y0: -Infinity,\n        x1: Infinity,\n        y1: Infinity,\n    };\n}\nexport function positive_y() {\n    return {\n        x0: -Infinity,\n        y0: Number.MIN_VALUE,\n        x1: Infinity,\n        y1: Infinity,\n    };\n}\nexport function union(a, b) {\n    return {\n        x0: min(a.x0, b.x0),\n        x1: max(a.x1, b.x1),\n        y0: min(a.y0, b.y0),\n        y1: max(a.y1, b.y1),\n    };\n}\nexport class BBox {\n    constructor(box) {\n        if (box == null) {\n            this.x0 = 0;\n            this.y0 = 0;\n            this.x1 = 0;\n            this.y1 = 0;\n        }\n        else if ('x0' in box) {\n            const { x0, y0, x1, y1 } = box;\n            if (!(x0 <= x1 && y0 <= y1))\n                throw new Error(`invalid bbox {x0: ${x0}, y0: ${y0}, x1: ${x1}, y1: ${y1}}`);\n            this.x0 = x0;\n            this.y0 = y0;\n            this.x1 = x1;\n            this.y1 = y1;\n        }\n        else if (\"x\" in box) {\n            const { x, y, width, height } = box;\n            if (!(width >= 0 && height >= 0))\n                throw new Error(`invalid bbox {x: ${x}, y: ${y}, width: ${width}, height: ${height}}`);\n            this.x0 = x;\n            this.y0 = y;\n            this.x1 = x + width;\n            this.y1 = y + height;\n        }\n        else {\n            let left, right;\n            let top, bottom;\n            if (\"width\" in box) {\n                if (\"left\" in box) {\n                    left = box.left;\n                    right = left + box.width;\n                }\n                else if (\"right\" in box) {\n                    right = box.right;\n                    left = right - box.width;\n                }\n                else {\n                    const w2 = box.width / 2;\n                    left = box.hcenter - w2;\n                    right = box.hcenter + w2;\n                }\n            }\n            else {\n                left = box.left;\n                right = box.right;\n            }\n            if (\"height\" in box) {\n                if (\"top\" in box) {\n                    top = box.top;\n                    bottom = top + box.height;\n                }\n                else if (\"bottom\" in box) {\n                    bottom = box.bottom;\n                    top = bottom - box.height;\n                }\n                else {\n                    const h2 = box.height / 2;\n                    top = box.vcenter - h2;\n                    bottom = box.vcenter + h2;\n                }\n            }\n            else {\n                top = box.top;\n                bottom = box.bottom;\n            }\n            if (!(left <= right && top <= bottom))\n                throw new Error(`invalid bbox {left: ${left}, top: ${top}, right: ${right}, bottom: ${bottom}}`);\n            this.x0 = left;\n            this.y0 = top;\n            this.x1 = right;\n            this.y1 = bottom;\n        }\n    }\n    toString() {\n        return `BBox({left: ${this.left}, top: ${this.top}, width: ${this.width}, height: ${this.height}})`;\n    }\n    get left() { return this.x0; }\n    get top() { return this.y0; }\n    get right() { return this.x1; }\n    get bottom() { return this.y1; }\n    get p0() { return [this.x0, this.y0]; }\n    get p1() { return [this.x1, this.y1]; }\n    get x() { return this.x0; }\n    get y() { return this.y0; }\n    get width() { return this.x1 - this.x0; }\n    get height() { return this.y1 - this.y0; }\n    get rect() { return { x0: this.x0, y0: this.y0, x1: this.x1, y1: this.y1 }; }\n    get box() { return { x: this.x, y: this.y, width: this.width, height: this.height }; }\n    get h_range() { return { start: this.x0, end: this.x1 }; }\n    get v_range() { return { start: this.y0, end: this.y1 }; }\n    get ranges() { return [this.h_range, this.v_range]; }\n    get aspect() { return this.width / this.height; }\n    get hcenter() { return (this.left + this.right) / 2; }\n    get vcenter() { return (this.top + this.bottom) / 2; }\n    contains(x, y) {\n        return x >= this.x0 && x <= this.x1 && y >= this.y0 && y <= this.y1;\n    }\n    clip(x, y) {\n        if (x < this.x0)\n            x = this.x0;\n        else if (x > this.x1)\n            x = this.x1;\n        if (y < this.y0)\n            y = this.y0;\n        else if (y > this.y1)\n            y = this.y1;\n        return [x, y];\n    }\n    union(that) {\n        return new BBox({\n            x0: min(this.x0, that.x0),\n            y0: min(this.y0, that.y0),\n            x1: max(this.x1, that.x1),\n            y1: max(this.y1, that.y1),\n        });\n    }\n    equals(that) {\n        return this.x0 == that.x0 && this.y0 == that.y0 && this.x1 == that.x1 && this.y1 == that.y1;\n    }\n    get xview() {\n        return {\n            compute: (x) => {\n                return this.left + x;\n            },\n            v_compute: (xx) => {\n                const _xx = new Float64Array(xx.length);\n                const left = this.left;\n                for (let i = 0; i < xx.length; i++) {\n                    _xx[i] = left + xx[i];\n                }\n                return _xx;\n            },\n        };\n    }\n    get yview() {\n        return {\n            compute: (y) => {\n                return this.bottom - y;\n            },\n            v_compute: (yy) => {\n                const _yy = new Float64Array(yy.length);\n                const bottom = this.bottom;\n                for (let i = 0; i < yy.length; i++) {\n                    _yy[i] = bottom - yy[i];\n                }\n                return _yy;\n            },\n        };\n    }\n}\nBBox.__name__ = \"BBox\";\n//# sourceMappingURL=bbox.js.map"]},"metadata":{},"sourceType":"module"}