{"ast":null,"code":"import { HasProps } from \"./core/has_props\";\nimport * as p from \"./core/properties\";\nimport { isString } from \"./core/util/types\";\nimport { isEmpty } from \"./core/util/object\";\nimport { logger } from \"./core/logging\";\nexport class Model extends HasProps {\n  constructor(attrs) {\n    super(attrs);\n  }\n\n  static init_Model() {\n    this.define({\n      tags: [p.Array, []],\n      name: [p.String],\n      js_property_callbacks: [p.Any, {}],\n      js_event_callbacks: [p.Any, {}],\n      subscribed_events: [p.Array, []]\n    });\n  }\n\n  connect_signals() {\n    super.connect_signals();\n\n    this._update_property_callbacks();\n\n    this.connect(this.properties.js_property_callbacks.change, () => this._update_property_callbacks());\n    this.connect(this.properties.js_event_callbacks.change, () => this._update_event_callbacks());\n    this.connect(this.properties.subscribed_events.change, () => this._update_event_callbacks());\n  }\n  /*protected*/\n\n\n  _process_event(event) {\n    for (const callback of this.js_event_callbacks[event.event_name] || []) callback.execute(event);\n\n    if (this.document != null && this.subscribed_events.some(m => m == event.event_name)) this.document.event_manager.send_event(event);\n  }\n\n  trigger_event(event) {\n    if (this.document != null) {\n      event.origin = this;\n      this.document.event_manager.trigger(event);\n    }\n  }\n\n  _update_event_callbacks() {\n    if (this.document == null) {\n      // File an issue: SidePanel in particular seems to have this issue\n      logger.warn('WARNING: Document not defined for updating event callbacks');\n      return;\n    }\n\n    this.document.event_manager.subscribed_models.add(this.id);\n  }\n\n  _update_property_callbacks() {\n    const signal_for = event => {\n      const [evt, attr = null] = event.split(\":\");\n      return attr != null ? this.properties[attr][evt] : this[evt];\n    };\n\n    for (const event in this._js_callbacks) {\n      const callbacks = this._js_callbacks[event];\n      const signal = signal_for(event);\n\n      for (const cb of callbacks) this.disconnect(signal, cb);\n    }\n\n    this._js_callbacks = {};\n\n    for (const event in this.js_property_callbacks) {\n      const callbacks = this.js_property_callbacks[event];\n      const wrappers = callbacks.map(cb => () => cb.execute(this));\n      this._js_callbacks[event] = wrappers;\n      const signal = signal_for(event);\n\n      for (const cb of wrappers) this.connect(signal, cb);\n    }\n  }\n\n  _doc_attached() {\n    if (!isEmpty(this.js_event_callbacks) || !isEmpty(this.subscribed_events)) this._update_event_callbacks();\n  }\n\n  select(selector) {\n    if (isString(selector)) return this.references().filter(ref => ref instanceof Model && ref.name === selector);else if (selector.prototype instanceof HasProps) return this.references().filter(ref => ref instanceof selector);else throw new Error(\"invalid selector\");\n  }\n\n  select_one(selector) {\n    const result = this.select(selector);\n\n    switch (result.length) {\n      case 0:\n        return null;\n\n      case 1:\n        return result[0];\n\n      default:\n        throw new Error(\"found more than one object matching given selector\");\n    }\n  }\n\n}\nModel.__name__ = \"Model\";\nModel.init_Model();","map":{"version":3,"sources":["/Users/gen/Desktop/defund_to_refund/node_modules/@bokeh/bokehjs/build/js/lib/model.js"],"names":["HasProps","p","isString","isEmpty","logger","Model","constructor","attrs","init_Model","define","tags","Array","name","String","js_property_callbacks","Any","js_event_callbacks","subscribed_events","connect_signals","_update_property_callbacks","connect","properties","change","_update_event_callbacks","_process_event","event","callback","event_name","execute","document","some","m","event_manager","send_event","trigger_event","origin","trigger","warn","subscribed_models","add","id","signal_for","evt","attr","split","_js_callbacks","callbacks","signal","cb","disconnect","wrappers","map","_doc_attached","select","selector","references","filter","ref","prototype","Error","select_one","result","length","__name__"],"mappings":"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","sourcesContent":["import { HasProps } from \"./core/has_props\";\nimport * as p from \"./core/properties\";\nimport { isString } from \"./core/util/types\";\nimport { isEmpty } from \"./core/util/object\";\nimport { logger } from \"./core/logging\";\nexport class Model extends HasProps {\n    constructor(attrs) {\n        super(attrs);\n    }\n    static init_Model() {\n        this.define({\n            tags: [p.Array, []],\n            name: [p.String],\n            js_property_callbacks: [p.Any, {}],\n            js_event_callbacks: [p.Any, {}],\n            subscribed_events: [p.Array, []],\n        });\n    }\n    connect_signals() {\n        super.connect_signals();\n        this._update_property_callbacks();\n        this.connect(this.properties.js_property_callbacks.change, () => this._update_property_callbacks());\n        this.connect(this.properties.js_event_callbacks.change, () => this._update_event_callbacks());\n        this.connect(this.properties.subscribed_events.change, () => this._update_event_callbacks());\n    }\n    /*protected*/ _process_event(event) {\n        for (const callback of this.js_event_callbacks[event.event_name] || [])\n            callback.execute(event);\n        if (this.document != null && this.subscribed_events.some((m) => m == event.event_name))\n            this.document.event_manager.send_event(event);\n    }\n    trigger_event(event) {\n        if (this.document != null) {\n            event.origin = this;\n            this.document.event_manager.trigger(event);\n        }\n    }\n    _update_event_callbacks() {\n        if (this.document == null) {\n            // File an issue: SidePanel in particular seems to have this issue\n            logger.warn('WARNING: Document not defined for updating event callbacks');\n            return;\n        }\n        this.document.event_manager.subscribed_models.add(this.id);\n    }\n    _update_property_callbacks() {\n        const signal_for = (event) => {\n            const [evt, attr = null] = event.split(\":\");\n            return attr != null ? this.properties[attr][evt] : this[evt];\n        };\n        for (const event in this._js_callbacks) {\n            const callbacks = this._js_callbacks[event];\n            const signal = signal_for(event);\n            for (const cb of callbacks)\n                this.disconnect(signal, cb);\n        }\n        this._js_callbacks = {};\n        for (const event in this.js_property_callbacks) {\n            const callbacks = this.js_property_callbacks[event];\n            const wrappers = callbacks.map((cb) => () => cb.execute(this));\n            this._js_callbacks[event] = wrappers;\n            const signal = signal_for(event);\n            for (const cb of wrappers)\n                this.connect(signal, cb);\n        }\n    }\n    _doc_attached() {\n        if (!isEmpty(this.js_event_callbacks) || !isEmpty(this.subscribed_events))\n            this._update_event_callbacks();\n    }\n    select(selector) {\n        if (isString(selector))\n            return this.references().filter((ref) => ref instanceof Model && ref.name === selector);\n        else if (selector.prototype instanceof HasProps)\n            return this.references().filter((ref) => ref instanceof selector);\n        else\n            throw new Error(\"invalid selector\");\n    }\n    select_one(selector) {\n        const result = this.select(selector);\n        switch (result.length) {\n            case 0:\n                return null;\n            case 1:\n                return result[0];\n            default:\n                throw new Error(\"found more than one object matching given selector\");\n        }\n    }\n}\nModel.__name__ = \"Model\";\nModel.init_Model();\n//# sourceMappingURL=model.js.map"]},"metadata":{},"sourceType":"module"}