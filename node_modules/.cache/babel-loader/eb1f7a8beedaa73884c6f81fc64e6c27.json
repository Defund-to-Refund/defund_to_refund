{"ast":null,"code":"import { isBoolean, isString, isArray, isPlainObject } from \"./util/types\";\n\nconst _createElement = tag => {\n  return (attrs = {}, ...children) => {\n    const element = document.createElement(tag);\n    element.classList.add(\"bk\");\n\n    for (const attr in attrs) {\n      let value = attrs[attr];\n      if (value == null || isBoolean(value) && !value) continue;\n\n      if (attr === \"class\") {\n        if (isString(value)) value = value.split(/\\s+/);\n\n        if (isArray(value)) {\n          for (const cls of value) {\n            if (cls != null) element.classList.add(cls);\n          }\n\n          continue;\n        }\n      }\n\n      if (attr === \"style\" && isPlainObject(value)) {\n        for (const prop in value) {\n          element.style[prop] = value[prop];\n        }\n\n        continue;\n      }\n\n      if (attr === \"data\" && isPlainObject(value)) {\n        for (const key in value) {\n          element.dataset[key] = value[key]; // XXX: attrs needs a better type\n        }\n\n        continue;\n      }\n\n      element.setAttribute(attr, value);\n    }\n\n    function append(child) {\n      if (child instanceof HTMLElement) element.appendChild(child);else if (isString(child)) element.appendChild(document.createTextNode(child));else if (child != null && child !== false) throw new Error(`expected an HTMLElement, string, false or null, got ${JSON.stringify(child)}`);\n    }\n\n    for (const child of children) {\n      if (isArray(child)) {\n        for (const _child of child) append(_child);\n      } else append(child);\n    }\n\n    return element;\n  };\n};\n\nexport function createElement(tag, attrs, ...children) {\n  return _createElement(tag)(attrs, ...children);\n}\nexport const div = _createElement(\"div\"),\n      span = _createElement(\"span\"),\n      canvas = _createElement(\"canvas\"),\n      link = _createElement(\"link\"),\n      style = _createElement(\"style\"),\n      a = _createElement(\"a\"),\n      p = _createElement(\"p\"),\n      i = _createElement(\"i\"),\n      pre = _createElement(\"pre\"),\n      button = _createElement(\"button\"),\n      label = _createElement(\"label\"),\n      input = _createElement(\"input\"),\n      select = _createElement(\"select\"),\n      option = _createElement(\"option\"),\n      optgroup = _createElement(\"optgroup\"),\n      textarea = _createElement(\"textarea\");\nexport function nbsp() {\n  return document.createTextNode(\"\\u00a0\");\n}\nexport function append(element, ...children) {\n  for (const child of children) element.appendChild(child);\n}\nexport function remove(element) {\n  const parent = element.parentNode;\n\n  if (parent != null) {\n    parent.removeChild(element);\n  }\n}\nexport const removeElement = remove;\nexport function replaceWith(element, replacement) {\n  const parent = element.parentNode;\n\n  if (parent != null) {\n    parent.replaceChild(replacement, element);\n  }\n}\nexport function prepend(element, ...nodes) {\n  const first = element.firstChild;\n\n  for (const node of nodes) {\n    element.insertBefore(node, first);\n  }\n}\nexport function empty(element) {\n  let child;\n\n  while (child = element.firstChild) {\n    element.removeChild(child);\n  }\n}\nexport function display(element) {\n  element.style.display = \"\";\n}\nexport function undisplay(element) {\n  element.style.display = \"none\";\n}\nexport function show(element) {\n  element.style.visibility = \"\";\n}\nexport function hide(element) {\n  element.style.visibility = \"hidden\";\n}\nexport function offset(element) {\n  const rect = element.getBoundingClientRect();\n  return {\n    top: rect.top + window.pageYOffset - document.documentElement.clientTop,\n    left: rect.left + window.pageXOffset - document.documentElement.clientLeft\n  };\n}\nexport function matches(el, selector) {\n  const p = Element.prototype;\n  const f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector;\n  return f.call(el, selector);\n}\nexport function parent(el, selector) {\n  let node = el;\n\n  while (node = node.parentElement) {\n    if (matches(node, selector)) return node;\n  }\n\n  return null;\n}\n\nfunction num(value) {\n  return parseFloat(value) || 0;\n}\n\nexport function extents(el) {\n  const style = getComputedStyle(el);\n  return {\n    border: {\n      top: num(style.borderTopWidth),\n      bottom: num(style.borderBottomWidth),\n      left: num(style.borderLeftWidth),\n      right: num(style.borderRightWidth)\n    },\n    margin: {\n      top: num(style.marginTop),\n      bottom: num(style.marginBottom),\n      left: num(style.marginLeft),\n      right: num(style.marginRight)\n    },\n    padding: {\n      top: num(style.paddingTop),\n      bottom: num(style.paddingBottom),\n      left: num(style.paddingLeft),\n      right: num(style.paddingRight)\n    }\n  };\n}\nexport function size(el) {\n  const rect = el.getBoundingClientRect();\n  return {\n    width: Math.ceil(rect.width),\n    height: Math.ceil(rect.height)\n  };\n}\nexport function scroll_size(el) {\n  return {\n    width: Math.ceil(el.scrollWidth),\n    height: Math.ceil(el.scrollHeight)\n  };\n}\nexport function outer_size(el) {\n  const {\n    margin: {\n      left,\n      right,\n      top,\n      bottom\n    }\n  } = extents(el);\n  const {\n    width,\n    height\n  } = size(el);\n  return {\n    width: Math.ceil(width + left + right),\n    height: Math.ceil(height + top + bottom)\n  };\n}\nexport function content_size(el) {\n  const {\n    left,\n    top\n  } = el.getBoundingClientRect();\n  const {\n    padding\n  } = extents(el);\n  let width = 0;\n  let height = 0;\n\n  for (const child of el.children) {\n    const rect = child.getBoundingClientRect();\n    width = Math.max(width, Math.ceil(rect.left - left - padding.left + rect.width));\n    height = Math.max(height, Math.ceil(rect.top - top - padding.top + rect.height));\n  }\n\n  return {\n    width,\n    height\n  };\n}\nexport function position(el, box, margin) {\n  const {\n    style\n  } = el;\n  style.left = `${box.x}px`;\n  style.top = `${box.y}px`;\n  style.width = `${box.width}px`;\n  style.height = `${box.height}px`;\n  if (margin == null) style.margin = \"\";else {\n    const {\n      top,\n      right,\n      bottom,\n      left\n    } = margin;\n    style.margin = `${top}px ${right}px ${bottom}px ${left}px`;\n  }\n}\nexport function children(el) {\n  return Array.from(el.children);\n}\nexport class ClassList {\n  constructor(el) {\n    this.el = el;\n    this.classList = el.classList;\n  }\n\n  get values() {\n    const values = [];\n\n    for (let i = 0; i < this.classList.length; i++) {\n      const item = this.classList.item(i);\n      if (item != null) values.push(item);\n    }\n\n    return values;\n  }\n\n  has(cls) {\n    return this.classList.contains(cls);\n  }\n\n  add(...classes) {\n    for (const cls of classes) this.classList.add(cls);\n\n    return this;\n  }\n\n  remove(...classes) {\n    for (const cls of classes) this.classList.remove(cls);\n\n    return this;\n  }\n\n  clear() {\n    for (const cls of this.values) {\n      if (cls != \"bk\") this.classList.remove(cls);\n    }\n\n    return this;\n  }\n\n  toggle(cls, activate) {\n    const add = activate != null ? activate : !this.has(cls);\n    if (add) this.add(cls);else this.remove(cls);\n    return this;\n  }\n\n}\nClassList.__name__ = \"ClassList\";\nexport function classes(el) {\n  return new ClassList(el);\n}\nexport var Keys;\n\n(function (Keys) {\n  Keys[Keys[\"Backspace\"] = 8] = \"Backspace\";\n  Keys[Keys[\"Tab\"] = 9] = \"Tab\";\n  Keys[Keys[\"Enter\"] = 13] = \"Enter\";\n  Keys[Keys[\"Esc\"] = 27] = \"Esc\";\n  Keys[Keys[\"PageUp\"] = 33] = \"PageUp\";\n  Keys[Keys[\"PageDown\"] = 34] = \"PageDown\";\n  Keys[Keys[\"Left\"] = 37] = \"Left\";\n  Keys[Keys[\"Up\"] = 38] = \"Up\";\n  Keys[Keys[\"Right\"] = 39] = \"Right\";\n  Keys[Keys[\"Down\"] = 40] = \"Down\";\n  Keys[Keys[\"Delete\"] = 46] = \"Delete\";\n})(Keys || (Keys = {}));\n\nexport function undisplayed(el, fn) {\n  const {\n    display\n  } = el.style;\n  el.style.display = \"none\";\n\n  try {\n    return fn();\n  } finally {\n    el.style.display = display;\n  }\n}\nexport function unsized(el, fn) {\n  return sized(el, {}, fn);\n}\nexport function sized(el, size, fn) {\n  const {\n    width,\n    height,\n    position,\n    display\n  } = el.style;\n  el.style.position = \"absolute\";\n  el.style.display = \"\";\n  el.style.width = size.width != null && size.width != Infinity ? `${size.width}px` : \"auto\";\n  el.style.height = size.height != null && size.height != Infinity ? `${size.height}px` : \"auto\";\n\n  try {\n    return fn();\n  } finally {\n    el.style.position = position;\n    el.style.display = display;\n    el.style.width = width;\n    el.style.height = height;\n  }\n}\nexport class StyleSheet {\n  constructor() {\n    this.style = style({\n      type: \"text/css\"\n    });\n    prepend(document.head, this.style);\n  }\n\n  append(css) {\n    this.style.appendChild(document.createTextNode(css));\n  }\n\n}\nStyleSheet.__name__ = \"StyleSheet\";\nexport const styles = new StyleSheet();","map":{"version":3,"sources":["/Users/gen/Desktop/defund_to_refund/node_modules/@bokeh/bokehjs/build/js/lib/core/dom.js"],"names":["isBoolean","isString","isArray","isPlainObject","_createElement","tag","attrs","children","element","document","createElement","classList","add","attr","value","split","cls","prop","style","key","dataset","setAttribute","append","child","HTMLElement","appendChild","createTextNode","Error","JSON","stringify","_child","div","span","canvas","link","a","p","i","pre","button","label","input","select","option","optgroup","textarea","nbsp","remove","parent","parentNode","removeChild","removeElement","replaceWith","replacement","replaceChild","prepend","nodes","first","firstChild","node","insertBefore","empty","display","undisplay","show","visibility","hide","offset","rect","getBoundingClientRect","top","window","pageYOffset","documentElement","clientTop","left","pageXOffset","clientLeft","matches","el","selector","Element","prototype","f","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","call","parentElement","num","parseFloat","extents","getComputedStyle","border","borderTopWidth","bottom","borderBottomWidth","borderLeftWidth","right","borderRightWidth","margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","size","width","Math","ceil","height","scroll_size","scrollWidth","scrollHeight","outer_size","content_size","max","position","box","x","y","Array","from","ClassList","constructor","values","length","item","push","has","contains","classes","clear","toggle","activate","__name__","Keys","undisplayed","fn","unsized","sized","Infinity","StyleSheet","type","head","css","styles"],"mappings":"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","sourcesContent":["import { isBoolean, isString, isArray, isPlainObject } from \"./util/types\";\nconst _createElement = (tag) => {\n    return (attrs = {}, ...children) => {\n        const element = document.createElement(tag);\n        element.classList.add(\"bk\");\n        for (const attr in attrs) {\n            let value = attrs[attr];\n            if (value == null || isBoolean(value) && !value)\n                continue;\n            if (attr === \"class\") {\n                if (isString(value))\n                    value = value.split(/\\s+/);\n                if (isArray(value)) {\n                    for (const cls of value) {\n                        if (cls != null)\n                            element.classList.add(cls);\n                    }\n                    continue;\n                }\n            }\n            if (attr === \"style\" && isPlainObject(value)) {\n                for (const prop in value) {\n                    element.style[prop] = value[prop];\n                }\n                continue;\n            }\n            if (attr === \"data\" && isPlainObject(value)) {\n                for (const key in value) {\n                    element.dataset[key] = value[key]; // XXX: attrs needs a better type\n                }\n                continue;\n            }\n            element.setAttribute(attr, value);\n        }\n        function append(child) {\n            if (child instanceof HTMLElement)\n                element.appendChild(child);\n            else if (isString(child))\n                element.appendChild(document.createTextNode(child));\n            else if (child != null && child !== false)\n                throw new Error(`expected an HTMLElement, string, false or null, got ${JSON.stringify(child)}`);\n        }\n        for (const child of children) {\n            if (isArray(child)) {\n                for (const _child of child)\n                    append(_child);\n            }\n            else\n                append(child);\n        }\n        return element;\n    };\n};\nexport function createElement(tag, attrs, ...children) {\n    return _createElement(tag)(attrs, ...children);\n}\nexport const div = _createElement(\"div\"), span = _createElement(\"span\"), canvas = _createElement(\"canvas\"), link = _createElement(\"link\"), style = _createElement(\"style\"), a = _createElement(\"a\"), p = _createElement(\"p\"), i = _createElement(\"i\"), pre = _createElement(\"pre\"), button = _createElement(\"button\"), label = _createElement(\"label\"), input = _createElement(\"input\"), select = _createElement(\"select\"), option = _createElement(\"option\"), optgroup = _createElement(\"optgroup\"), textarea = _createElement(\"textarea\");\nexport function nbsp() {\n    return document.createTextNode(\"\\u00a0\");\n}\nexport function append(element, ...children) {\n    for (const child of children)\n        element.appendChild(child);\n}\nexport function remove(element) {\n    const parent = element.parentNode;\n    if (parent != null) {\n        parent.removeChild(element);\n    }\n}\nexport const removeElement = remove;\nexport function replaceWith(element, replacement) {\n    const parent = element.parentNode;\n    if (parent != null) {\n        parent.replaceChild(replacement, element);\n    }\n}\nexport function prepend(element, ...nodes) {\n    const first = element.firstChild;\n    for (const node of nodes) {\n        element.insertBefore(node, first);\n    }\n}\nexport function empty(element) {\n    let child;\n    while (child = element.firstChild) {\n        element.removeChild(child);\n    }\n}\nexport function display(element) {\n    element.style.display = \"\";\n}\nexport function undisplay(element) {\n    element.style.display = \"none\";\n}\nexport function show(element) {\n    element.style.visibility = \"\";\n}\nexport function hide(element) {\n    element.style.visibility = \"hidden\";\n}\nexport function offset(element) {\n    const rect = element.getBoundingClientRect();\n    return {\n        top: rect.top + window.pageYOffset - document.documentElement.clientTop,\n        left: rect.left + window.pageXOffset - document.documentElement.clientLeft,\n    };\n}\nexport function matches(el, selector) {\n    const p = Element.prototype;\n    const f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector;\n    return f.call(el, selector);\n}\nexport function parent(el, selector) {\n    let node = el;\n    while (node = node.parentElement) {\n        if (matches(node, selector))\n            return node;\n    }\n    return null;\n}\nfunction num(value) {\n    return parseFloat(value) || 0;\n}\nexport function extents(el) {\n    const style = getComputedStyle(el);\n    return {\n        border: {\n            top: num(style.borderTopWidth),\n            bottom: num(style.borderBottomWidth),\n            left: num(style.borderLeftWidth),\n            right: num(style.borderRightWidth),\n        },\n        margin: {\n            top: num(style.marginTop),\n            bottom: num(style.marginBottom),\n            left: num(style.marginLeft),\n            right: num(style.marginRight),\n        },\n        padding: {\n            top: num(style.paddingTop),\n            bottom: num(style.paddingBottom),\n            left: num(style.paddingLeft),\n            right: num(style.paddingRight),\n        },\n    };\n}\nexport function size(el) {\n    const rect = el.getBoundingClientRect();\n    return {\n        width: Math.ceil(rect.width),\n        height: Math.ceil(rect.height),\n    };\n}\nexport function scroll_size(el) {\n    return {\n        width: Math.ceil(el.scrollWidth),\n        height: Math.ceil(el.scrollHeight),\n    };\n}\nexport function outer_size(el) {\n    const { margin: { left, right, top, bottom } } = extents(el);\n    const { width, height } = size(el);\n    return {\n        width: Math.ceil(width + left + right),\n        height: Math.ceil(height + top + bottom),\n    };\n}\nexport function content_size(el) {\n    const { left, top } = el.getBoundingClientRect();\n    const { padding } = extents(el);\n    let width = 0;\n    let height = 0;\n    for (const child of el.children) {\n        const rect = child.getBoundingClientRect();\n        width = Math.max(width, Math.ceil(rect.left - left - padding.left + rect.width));\n        height = Math.max(height, Math.ceil(rect.top - top - padding.top + rect.height));\n    }\n    return { width, height };\n}\nexport function position(el, box, margin) {\n    const { style } = el;\n    style.left = `${box.x}px`;\n    style.top = `${box.y}px`;\n    style.width = `${box.width}px`;\n    style.height = `${box.height}px`;\n    if (margin == null)\n        style.margin = \"\";\n    else {\n        const { top, right, bottom, left } = margin;\n        style.margin = `${top}px ${right}px ${bottom}px ${left}px`;\n    }\n}\nexport function children(el) {\n    return Array.from(el.children);\n}\nexport class ClassList {\n    constructor(el) {\n        this.el = el;\n        this.classList = el.classList;\n    }\n    get values() {\n        const values = [];\n        for (let i = 0; i < this.classList.length; i++) {\n            const item = this.classList.item(i);\n            if (item != null)\n                values.push(item);\n        }\n        return values;\n    }\n    has(cls) {\n        return this.classList.contains(cls);\n    }\n    add(...classes) {\n        for (const cls of classes)\n            this.classList.add(cls);\n        return this;\n    }\n    remove(...classes) {\n        for (const cls of classes)\n            this.classList.remove(cls);\n        return this;\n    }\n    clear() {\n        for (const cls of this.values) {\n            if (cls != \"bk\")\n                this.classList.remove(cls);\n        }\n        return this;\n    }\n    toggle(cls, activate) {\n        const add = activate != null ? activate : !this.has(cls);\n        if (add)\n            this.add(cls);\n        else\n            this.remove(cls);\n        return this;\n    }\n}\nClassList.__name__ = \"ClassList\";\nexport function classes(el) {\n    return new ClassList(el);\n}\nexport var Keys;\n(function (Keys) {\n    Keys[Keys[\"Backspace\"] = 8] = \"Backspace\";\n    Keys[Keys[\"Tab\"] = 9] = \"Tab\";\n    Keys[Keys[\"Enter\"] = 13] = \"Enter\";\n    Keys[Keys[\"Esc\"] = 27] = \"Esc\";\n    Keys[Keys[\"PageUp\"] = 33] = \"PageUp\";\n    Keys[Keys[\"PageDown\"] = 34] = \"PageDown\";\n    Keys[Keys[\"Left\"] = 37] = \"Left\";\n    Keys[Keys[\"Up\"] = 38] = \"Up\";\n    Keys[Keys[\"Right\"] = 39] = \"Right\";\n    Keys[Keys[\"Down\"] = 40] = \"Down\";\n    Keys[Keys[\"Delete\"] = 46] = \"Delete\";\n})(Keys || (Keys = {}));\nexport function undisplayed(el, fn) {\n    const { display } = el.style;\n    el.style.display = \"none\";\n    try {\n        return fn();\n    }\n    finally {\n        el.style.display = display;\n    }\n}\nexport function unsized(el, fn) {\n    return sized(el, {}, fn);\n}\nexport function sized(el, size, fn) {\n    const { width, height, position, display } = el.style;\n    el.style.position = \"absolute\";\n    el.style.display = \"\";\n    el.style.width = size.width != null && size.width != Infinity ? `${size.width}px` : \"auto\";\n    el.style.height = size.height != null && size.height != Infinity ? `${size.height}px` : \"auto\";\n    try {\n        return fn();\n    }\n    finally {\n        el.style.position = position;\n        el.style.display = display;\n        el.style.width = width;\n        el.style.height = height;\n    }\n}\nexport class StyleSheet {\n    constructor() {\n        this.style = style({ type: \"text/css\" });\n        prepend(document.head, this.style);\n    }\n    append(css) {\n        this.style.appendChild(document.createTextNode(css));\n    }\n}\nStyleSheet.__name__ = \"StyleSheet\";\nexport const styles = new StyleSheet();\n//# sourceMappingURL=dom.js.map"]},"metadata":{},"sourceType":"module"}